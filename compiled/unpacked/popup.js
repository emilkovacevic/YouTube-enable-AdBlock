(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("toggle-extension"),t=document.getElementById("toggle-logs"),o=document.getElementById("console-log"),n=document.getElementById("remove-count"),l=document.querySelector("title");let s,r=!0,c=!1,i=0;if(!(e&&t&&o&&n))throw new Error("Loading Error");function a(e,t){const o=e?"Enabled":"Disabled";t.innerText=o}function d(e){e?(o.style.display="block",o.textContent="Logging is enabled. Logs will be shown here."):o.style.display="none"}l?(chrome.storage.local.get(["removeCount"],(e=>{i=e.removeCount||0})),e.addEventListener("click",(()=>{r=!r,chrome.storage.local.set({extensionEnabled:r},(()=>{a(r,e)}))})),t.addEventListener("click",(()=>{c=!c,chrome.storage.local.set({showLogs:c},(()=>{a(c,t),d(c)}))})),chrome.storage.local.get(["extensionEnabled","showLogs","removeCount"],(o=>{r=!1!==o.extensionEnabled,c=!1!==o.showLogs,a(r,e),a(c,t),d(c),n.textContent=`Removed Popups: ${o.removeCount||0}`})),r&&l&&(s=new MutationObserver((()=>{o.textContent="Event detected on the page. Searching for popups...",function(){const e=document.getElementsByClassName("ytd-popup-container")||null,t=document.querySelector("ytp-play-button")||null;if(t&&"Play"===t.getAttribute("data-title-no-tooltip")&&(o.textContent="Button was paused. Clicking...",t.click()),0!==e.length){o.textContent=`Found ${e.length} popups`,i+=e.length,chrome.storage.local.set({removeCount:i});for(const t of e)o.textContent="Removed popup...",o.textContent=t.toString(),t.remove();o.textContent="Popup cleanup finished!",o.textContent="Event monitoring started..."}else o.textContent="No popups found. Exiting..."}()})),s.observe(l,{subtree:!0,characterData:!0,childList:!0}))):o.textContent="No changes to title"}))})();