(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("toggle-extension"),t=document.getElementById("toggle-logs"),o=document.getElementById("console-log"),n=document.getElementById("remove-count"),s=document.querySelector("title");let l,c=!0,a=!1;function i(e,t){const o=e?"Enabled":"Disabled";t.innerText=o}function d(e){e?(o.style.display="block",o.textContent="Logging is enabled. Logs will be shown here."):o.style.display="none"}e&&t&&o&&n||(o.textContent="Loading error"),s?(c&&s&&(l=new MutationObserver((()=>{o.textContent="Event detected on the page. Searching for popups...",function(){const e=document.getElementsByClassName("ytd-popup-container")||null,t=document.querySelector("ytp-play-button")||null;if(t&&"Play"===t.getAttribute("data-title-no-tooltip")&&(o.textContent="Button was paused. Clicking...",t.click()),0!==e.length){o.textContent=`Found ${e.length} popups`;for(const t of e)o.textContent="Removed popup...",o.textContent=t.toString(),t.remove();o.textContent="Popup cleanup finished!",o.textContent="Event monitoring started..."}else o.textContent="%cNo popups found. Exiting..."}()})),l.observe(s,{subtree:!0,characterData:!0,childList:!0})),e.addEventListener("click",(()=>{chrome.storage.local.get(["extensionEnabled"],(t=>{c=!1!==t.extensionEnabled,c=!c,chrome.storage.local.set({extensionEnabled:c},(()=>{i(c,e)}))}))})),t.addEventListener("click",(()=>{chrome.storage.local.get(["showLogs"],(e=>{a=!1!==e.showLogs,a=!a,chrome.storage.local.set({showLogs:a},(()=>{i(a,t),d(a)}))}))})),chrome.storage.local.get(["extensionEnabled","showLogs","removeCount"],(o=>{c=!1!==o.extensionEnabled,a=!1!==o.showLogs,i(c,e),i(a,t),d(a),n.textContent=`Removed Popups: ${o.removeCount||0}`}))):o.textContent="No changes to title"}))})();